<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PROCESOS AUDIO</title>
<style>
:root{
  --bg:#f5f6f9;        /* fondo gris claro */
  --bg-soft:#eef0f4;   /* panel lateral */
  --card:#ffffff;      /* tarjetas */
  --ink:#1f2328;       /* texto */
  --muted:#6b717c;
  --shadow:0 6px 18px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.9);
  --btnA:#ffffff; --btnB:#eceff3; /* botones 3D */
  --radius:14px;
  --accent:#e25a5a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

/* -------- Header -------- */
.header{
  position:sticky; top:0; z-index:10;
  padding:14px 18px;
  background:linear-gradient(90deg,#915b5b 0,#c74f4f 25%,#9a3a3a 50%,#7e2e2e 100%);
  display:flex; gap:12px; align-items:center; color:#fff;
}
.h-title{display:flex;align-items:center;gap:10px;font-weight:800;font-size:26px;letter-spacing:.3px}
.h-title .ear{width:28px;height:28px;border-radius:50%;display:grid;place-items:center;background:#ffffff22;box-shadow:var(--shadow)}
.search{flex:1;max-width:640px}
.search input{width:100%;padding:10px 14px;border-radius:999px;border:1px solid #ffffff22;background:#ffffff15;color:#fff;outline:none;box-shadow:inset 0 1px 0 #fff4,0 4px 10px rgba(0,0,0,.2)}
.btn{
  padding:10px 14px;border-radius:999px;border:1px solid #00000028;
  background:linear-gradient(180deg,var(--btnA),var(--btnB)); box-shadow:var(--shadow);
  display:inline-flex;gap:8px;align-items:center;cursor:pointer;color:var(--ink);
}
.badge{opacity:.9}

/* -------- Layout -------- */
.app{display:flex;flex-direction:column;height:100%}
.body{display:grid;grid-template-columns:340px 1fr;gap:16px;padding:14px}
.left{background:var(--bg-soft);border-right:1px solid #dde2ea;border-radius:12px;padding:12px;overflow:auto}
.right{background:var(--bg);border-radius:12px;overflow:auto}

/* -------- Procesos (izquierda) -------- */
.left h3{margin:6px 8px 10px;font-size:18px}
.proc{
  background:var(--card); border-radius:var(--radius); padding:10px 10px;
  border:1px solid #e6ebf2; display:flex; flex-direction:column; gap:6px;
  margin:10px; box-shadow:var(--shadow);
}
.proc .top{display:flex;align-items:center;gap:8px}
.proc .dot{width:10px;height:10px;border-radius:50%;box-shadow:inset 0 1px 0 #fff}
.proc .name{flex:1;font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.proc .acts{display:flex;gap:6px}
.ico{width:26px;height:26px;border-radius:8px;display:grid;place-items:center;cursor:pointer;background:#0000000a;border:1px solid #00000014}
.proc .min{font-size:12px;color:var(--muted)}
.proc.dragging{opacity:.6}
.proc.dragover{outline:2px dashed #c4c9d2}

/* -------- Hoja derecha -------- */
.sheet-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 14px;background:var(--bg-soft);border-bottom:1px solid #e6ebf2;border-radius:12px 12px 0 0
}
.sheet-title{font-weight:800;font-size:18px}
.head-actions{display:flex;gap:10px;align-items:center}
.pill{
  padding:8px 12px;border-radius:999px;border:1px solid #d9dee6;
  background:linear-gradient(180deg,var(--btnA),var(--btnB)); box-shadow:var(--shadow);
  display:inline-flex;gap:8px;align-items:center;color:var(--ink);cursor:pointer
}

.sheet-body{padding:12px}

/* Subproceso tarjeta */
.sub{background:var(--card);border-radius:var(--radius);margin-bottom:14px;box-shadow:var(--shadow);border:1px solid #e6ebf2}
.sub-head{display:flex;align-items:center;gap:10px;padding:10px;background:linear-gradient(180deg,#f9fafc,#eef1f6);border-bottom:1px solid #e3e7ee;border-radius:var(--radius) var(--radius) 0 0}
.sub-name{flex:1;font-weight:800;padding:8px 10px;border-radius:10px;border:1px solid #dfe4ec;background:#fff}
.sub-acts{display:flex;gap:8px;align-items:center}

/* Pasos */
.sub-body{padding:10px}
.step{
  position:relative;background:#fff;border:1px solid #e9edf3;border-radius:14px;padding:12px 12px 12px 62px;
  margin:8px 0; box-shadow:0 6px 16px rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.9)
}
.step:before{
  content:""; position:absolute; left:38px; top:-8px; bottom:-8px; width:8px; border-radius:999px;
  background:var(--line); box-shadow:inset 0 0 0 1px rgba(255,255,255,.35), 0 1px 0 rgba(0,0,0,.05)
}
.bubble{
  position:absolute; left:16px; top:10px; width:38px; height:38px; border-radius:50%;
  display:grid; place-items:center; background:#fff; border:1px solid #d9dee6; color:#111; font-weight:800;
  box-shadow:0 8px 14px rgba(0,0,0,.05), inset 0 1px 0 #fff;
}
.step-row{display:flex;gap:8px;align-items:center}
.step-title input{border:0;background:#0000;font-weight:800;width:100%}

.btn-icon{padding:6px 8px;border-radius:10px;border:1px solid #00000018;background:#00000006;display:grid;place-items:center;cursor:pointer}
.resp{margin-left:auto;padding:6px 10px;border-radius:999px;border:1px solid #00000018;background:#00000006}

/* Detalle inmediatamente debajo del t√≠tulo */
.detail{margin-top:8px}
.detail textarea{width:100%;min-height:64px;border-radius:10px;border:1px solid #00000018;background:#00000006;padding:10px;color:var(--ink);resize:vertical}

/* Adjuntos */
.attach{display:flex;gap:8px;margin-top:6px;align-items:center;flex-wrap:wrap}
.attach .pill{font-size:12px}
.attach a{text-decoration:none}

/* Si/No */
.cond{display:flex;gap:14px;margin-top:10px;align-items:flex-start}
.cond-col{flex:1}
.tag-no{background:#111;color:#fff;border-radius:999px;padding:6px 12px;font-weight:900}
.tag-si{background:#0bbbd0;color:#fff;border-radius:999px;padding:4px 10px;font-weight:700;font-size:12px}
.cond-col .add{margin-left:8px}
.point{background:#fafbfe;border:1px solid #e6ebf2;border-radius:10px;padding:6px 8px;margin:6px 0}
.point .row{display:flex;gap:8px;align-items:center}
.point .idx{font-weight:800;width:56px}
.point input{flex:1;border:0;border-bottom:1px dashed #cfd5de;background:transparent;padding:4px 2px}
.point .mini{display:flex;gap:6px}
.flag{border:1px solid #00000018;background:#fff;border-radius:10px;padding:4px 8px}

/* Dock inferior */
.dock{position:sticky;bottom:0;padding:10px;border-top:1px solid #e6ebf2;background:#ffffffd9;display:flex;gap:8px;justify-content:flex-end}

/* Mostrar/ocultar iconos en modo vista */
.hide-icons .btn-icon,
.hide-icons .pill.icon-only,
.hide-icons .ico.action{display:none}

/* Compactaci√≥n */
.compact .step{margin:6px 0;padding:10px 10px 10px 60px}
.compact .bubble{width:36px;height:36px;left:15px}
.compact .sub{margin-bottom:10px}

.small{font-size:12px;color:var(--muted)}
</style>
</head>
<body>
<div class="app" id="app">

  <!-- HEADER -->
  <div class="header">
    <div class="h-title"><span class="ear">üéß</span> PROCESOS AUDIO</div>
    <div class="search"><input id="q" placeholder="Buscar procesos‚Ä¶"></div>

    <button class="btn" id="btnAddProc">+ Procesos</button>
    <button class="btn" id="btnAddSubStep">+ Subproceso + Paso</button>
    <button class="btn" id="btnToggleEdit">‚úèÔ∏è Editar</button>
    <button class="btn" id="btnCompact">üß© Compacto</button>
    <button class="btn" id="btnExport">‚¨áÔ∏è HTML</button>
    <div class="badge small" id="last"></div>
  </div>

  <!-- BODY -->
  <div class="body">
    <!-- LEFT -->
    <div class="left">
      <h3>Procesos</h3>
      <div id="procList"></div>
    </div>

    <!-- RIGHT -->
    <div class="right">
      <div id="sheet"></div>
    </div>
  </div>

  <!-- DOCK -->
  <div class="dock">
    <span class="small">Consejo: usa ‚ÄúEditar‚Äù para mostrar iconos, arrastra procesos para reordenar.</span>
  </div>
</div>

<script>
/* ========= STATE ========= */
const LSKEY='pa_full_v7';
const PALETTE=['#ffc9c9','#ffe0c9','#fff3bf','#e9fac8','#d2f4ea','#c5f6fa','#e7f5ff','#e5dbff','#ffd6e8','#ffe5cc'];
let data = JSON.parse(localStorage.getItem(LSKEY)||'null') || {
  selected:null,
  processes:[{id:uid(),name:'Revisi√≥n auditiva',color:PALETTE[0],sub:[]}]
};
if(data.selected==null) data.selected=data.processes[0]?.id||null;

/* ========= UTILS ========= */
function uid(){return Math.random().toString(36).slice(2,9)}
function save(){ localStorage.setItem(LSKEY,JSON.stringify(data)); stamp(); }
function stamp(){ document.getElementById('last').textContent='√öltima actualizaci√≥n '+new Date().toLocaleString(); }
function current(){ return data.processes.find(p=>p.id===data.selected) || null; }

/* ========= LEFT (procesos) ========= */
function renderLeft(){
  const list=document.getElementById('procList'); list.innerHTML='';
  const q=document.getElementById('q').value.toLowerCase();
  data.processes.forEach((p,idx)=>{
    if(q && !p.name.toLowerCase().includes(q)) return;
    const card=document.createElement('div');
    card.className='proc'; card.draggable=true; card.dataset.id=p.id;
    card.innerHTML=`
      <div class="top">
        <span class="dot" style="background:${p.color}"></span>
        <div class="name">${p.name}</div>
        <div class="acts">
          <span class="ico action" title="Editar" onclick="editProcess('${p.id}')">‚úèÔ∏è</span>
          <span class="ico action" title="Eliminar" onclick="delProcess('${p.id}')">üóëÔ∏è</span>
        </div>
      </div>
      <div class="min">${p.sub.length} subprocesos</div>
    `;
    if(p.id===data.selected) card.style.outline=`2px solid ${p.color}`;

    // drag & drop
    card.addEventListener('dragstart',e=>{card.classList.add('dragging'); e.dataTransfer.setData('text/plain',p.id)})
    card.addEventListener('dragend',()=>card.classList.remove('dragging'))
    card.addEventListener('dragover',e=>{
      e.preventDefault(); card.classList.add('dragover');
    });
    card.addEventListener('dragleave',()=>card.classList.remove('dragover'));
    card.addEventListener('drop',e=>{
      e.preventDefault(); card.classList.remove('dragover');
      const from=e.dataTransfer.getData('text/plain');
      if(!from || from===p.id) return;
      moveProcess(from,p.id);
    });

    card.onclick=(e)=>{ if(e.target.closest('.acts')) return; data.selected=p.id; renderRight(); save(); }
    list.appendChild(card);
  });
}
function moveProcess(fromId,toId){
  const arr=data.processes;
  const fromIndex=arr.findIndex(x=>x.id===fromId);
  const toIndex=arr.findIndex(x=>x.id===toId);
  const [it]=arr.splice(fromIndex,1);
  arr.splice(toIndex,0,it);
  renderLeft(); save();
}
function addProcess(){
  const name=prompt('Nombre del proceso','Nuevo proceso'); if(!name) return;
  const color=PALETTE[(data.processes.length)%PALETTE.length];
  data.processes.push({id:uid(), name, color, sub:[]});
  data.selected=data.processes.at(-1).id; renderLeft(); renderRight(); save();
}
function editProcess(id){
  const p=data.processes.find(x=>x.id===id); if(!p) return;
  const name=prompt('Editar nombre',p.name); if(!name) return;
  p.name=name; renderLeft(); renderRight(); save();
}
function delProcess(id){
  if(!confirm('¬øEliminar proceso y su contenido?')) return;
  const i=data.processes.findIndex(x=>x.id===id); if(i>-1) data.processes.splice(i,1);
  if(data.selected===id) data.selected=data.processes[0]?.id||null;
  renderLeft(); renderRight(); save();
}

/* ========= RIGHT (hoja) ========= */
function renderRight(){
  const p=current(); const sheet=document.getElementById('sheet'); sheet.innerHTML='';
  if(!p){ sheet.innerHTML='<div class="sheet-head"><div class="sheet-title">Selecciona un proceso</div></div>'; return; }

  const head=document.createElement('div'); head.className='sheet-head';
  head.innerHTML=`
    <div class="sheet-title">Proceso: ${p.name}</div>
    <div class="head-actions">
      <span class="pill" onclick="cycleColor()"><b>Color</b> <span class="dot" style="width:12px;height:12px;border-radius:50%;background:${p.color}"></span></span>
      <span class="pill" onclick="addSubStep()">+ Subproceso + Paso</span>
    </div>
  `;
  sheet.appendChild(head);

  const body=document.createElement('div'); body.className='sheet-body';
  p.sub.forEach(s=>{
    const sub=document.createElement('div'); sub.className='sub';
    sub.innerHTML=`
      <div class="sub-head">
        <input class="sub-name" value="${s.name}" oninput="s.name=this.value; save()">
        <div class="sub-acts">
          <span class="btn-icon" title="Paso +" onclick="addStep('${s.id}')">‚ûï</span>
          <select class="resp" onchange="s.resp=this.value; save()">
            ${['Audi√≥logo','Responsable','Otros'].map(r=>`<option ${s.resp===r?'selected':''}>${r}</option>`).join('')}
          </select>
        </div>
      </div>
      <div class="sub-body" id="sub-${s.id}"></div>
    `;
    body.appendChild(sub);

    const list=sub.querySelector(`#sub-${s.id}`);
    s.steps.forEach((st,i)=>{
      const step=document.createElement('div'); step.className='step'; step.style.setProperty('--line',p.color);
      step.innerHTML=`
        <div class="bubble">${i+1}</div>
        <div class="step-row">
          <div class="step-title w100"><input value="${st.title}" oninput="st.title=this.value; save()"></div>
          <select class="resp" onchange="st.resp=this.value; save()">
            ${['Audi√≥logo','Responsable','Otros'].map(r=>`<option ${st.resp===r?'selected':''}>${r}</option>`).join('')}
          </select>
          <span class="btn-icon" title="Eliminar paso" onclick="delStep('${s.id}','${st.id}')">üóëÔ∏è</span>
        </div>

        <!-- Detalle inmediatamente despu√©s del t√≠tulo -->
        <div class="detail">
          <textarea placeholder="Descripci√≥n‚Ä¶" oninput="st.desc=this.value; save()">${st.desc||''}</textarea>
        </div>

        <!-- S√≠ / No despu√©s del detalle -->
        <div class="cond">
          <div class="cond-col">
            <span class="tag-si">s√≠</span>
            <button class="btn-icon add" title="A√±adir punto s√≠" onclick="addCond('${s.id}','${st.id}','yes')">Ôºã</button>
            <div id="yes-${st.id}"></div>
          </div>
          <div class="cond-col">
            <span class="tag-no">NO</span>
            <button class="btn-icon add" title="A√±adir punto no" onclick="addCond('${s.id}','${st.id}','no')">Ôºã</button>
            <div id="no-${st.id}"></div>
          </div>
        </div>

        <div class="attach">
          <span class="pill icon-only" onclick="addLink('${s.id}','${st.id}')">üîó Enlace</span>
          <span class="pill icon-only" onclick="addDoc('${s.id}','${st.id}')">üìé Documento</span>
          <span class="small" id="meta-${st.id}"></span>
          <span class="pill icon-only" onclick="markGoal('${s.id}','${st.id}')">üéØ Cerrar caso</span>
          <span class="small" id="goal-${st.id}"></span>
        </div>
      `;
      list.appendChild(step);

      renderConds(st);
      refreshMeta(st);
      refreshGoal(st);
    });
  });
  sheet.appendChild(body);
}

/* color */
function cycleColor(){
  const p=current(); if(!p) return;
  const i=PALETTE.indexOf(p.color); p.color=PALETTE[(i+1)%PALETTE.length];
  renderLeft(); renderRight(); save();
}

/* crear subproceso + primer paso anclado */
function addSubStep(){
  const p=current(); if(!p) return;
  const s={id:uid(), name:'Nuevo subproceso', resp:'Audi√≥logo', steps:[]};
  p.sub.push(s);
  s.steps.push(newStep());
  renderLeft(); renderRight(); save();
}
function addStep(subId){
  const p=current(); const s=p.sub.find(x=>x.id===subId); if(!s) return;
  s.steps.push(newStep()); renderRight(); save();
}
function newStep(){
  return {id:uid(), title:'Nuevo paso', desc:'', resp:'Audi√≥logo', link:'', doc:'', goal:false, yes:[], no:[]};
}
function delStep(subId,stepId){
  const p=current(); const s=p.sub.find(x=>x.id===subId); if(!s) return;
  const i=s.steps.findIndex(t=>t.id===stepId); if(i>-1) s.steps.splice(i,1);
  renderRight(); save();
}

/* adjuntos + meta */
function refreshMeta(st){
  const meta=document.getElementById('meta-'+st.id);
  const tags=[];
  if(st.link) tags.push(`<a href="${st.link}" target="_blank" title="Abrir enlace">üîó</a>`);
  if(st.doc)  tags.push(`<a href="${st.doc}" target="_blank" title="Abrir documento">üìé</a>`);
  meta.innerHTML=tags.join(' ');
}
function addLink(subId,stepId){
  const st=findStep(subId,stepId);
  const v=prompt('URL del enlace', st.link||''); if(v==null) return;
  st.link=v.trim(); save(); refreshMeta(st);
}
function addDoc(subId,stepId){
  const st=findStep(subId,stepId);
  const v=prompt('URL del documento', st.doc||''); if(v==null) return;
  st.doc=v.trim(); save(); refreshMeta(st);
}
function markGoal(subId,stepId){
  const st=findStep(subId,stepId);
  st.goal=!st.goal; save(); refreshGoal(st);
}
function refreshGoal(st){
  const g=document.getElementById('goal-'+st.id);
  g.textContent=st.goal?'‚úÖ Caso cerrado':'';
}

/* S√≠/No */
function addCond(subId,stepId,kind){ // kind: yes | no
  const st=findStep(subId,stepId);
  const text=prompt(`A√±adir punto (${kind==='yes'?'s√≠':'no'})`,''); if(!text) return;
  (kind==='yes'?st.yes:st.no).push({id:uid(),txt:text,next:null,link:'',doc:'',kids:[]});
  save(); renderConds(st);
}
function delPoint(st,kind,pid){
  const arr=(kind==='yes'?st.yes:st.no);
  const i=arr.findIndex(x=>x.id===pid); if(i>-1) arr.splice(i,1);
  save(); renderConds(st);
}
function addKid(st,kind,pid){
  const arr=(kind==='yes'?st.yes:st.no);
  const it=arr.find(x=>x.id===pid); if(!it) return;
  const text=prompt('A√±adir sub-punto', ''); if(!text) return;
  it.kids.push({id:uid(),txt:text,next:null,link:'',doc:''});
  save(); renderConds(st);
}
function setNextProcess(st,kind,pid){
  const it=findPoint(st,kind,pid); if(!it) return;
  const procs=data.processes.map(p=>p.name);
  const sel=prompt('Pr√≥ximo proceso (exacto):\n'+procs.join('\n'), it.next||'');
  if(sel==null) return; it.next=sel.trim()||null; save(); renderConds(st);
}
function setLinkPoint(st,kind,pid){
  const it=findPoint(st,kind,pid); if(!it) return;
  const v=prompt('URL enlace',it.link||''); if(v==null) return; it.link=v.trim(); save(); renderConds(st);
}
function setDocPoint(st,kind,pid){
  const it=findPoint(st,kind,pid); if(!it) return;
  const v=prompt('URL documento',it.doc||''); if(v==null) return; it.doc=v.trim(); save(); renderConds(st);
}

function renderConds(st){
  const yBox=document.getElementById('yes-'+st.id);
  const nBox=document.getElementById('no-'+st.id);
  if(!yBox || !nBox) return;
  yBox.innerHTML=''; nBox.innerHTML='';
  const renderList=(arr,box,kind,base)=>{
    arr.forEach((it,idx)=>{
      const idxStr = base ? `${base}.${idx+1}` : `${(kind==='yes'?'S':'N')}.${idx+1}`; // etiqueta
      const row=document.createElement('div'); row.className='point';
      const badgeNext= it.next ? `<span class="flag">‚Üí ${it.next}</span>` : '';
      const link= it.link ? `<a href="${it.link}" target="_blank">üîó</a>` : '';
      const doc = it.doc  ? `<a href="${it.doc}" target="_blank">üìé</a>` : '';
      row.innerHTML=`
        <div class="row">
          <div class="idx">${idxStr}</div>
          <input value="${it.txt}" oninput="(function(v){ const el=findPointById('${st.id}','${kind}','${it.id}'); el.txt=v; save(); }) (this.value)">
          <div class="mini">
            <span class="btn-icon" title="Borrar" onclick="(function(){ const st=findStepById('${st.id}'); delPoint(st,'${kind}','${it.id}'); })()">üóëÔ∏è</span>
            <span class="btn-icon" title="Sub-punto" onclick="(function(){ const st=findStepById('${st.id}'); addKid(st,'${kind}','${it.id}'); })()">Ôºã</span>
            <span class="btn-icon" title="Pr√≥ximo proceso" onclick="(function(){ const st=findStepById('${st.id}'); setNextProcess(st,'${kind}','${it.id}'); })()">üö©</span>
            <span class="btn-icon" title="Enlace" onclick="(function(){ const st=findStepById('${st.id}'); setLinkPoint(st,'${kind}','${it.id}'); })()">üîó</span>
            <span class="btn-icon" title="Documento" onclick="(function(){ const st=findStepById('${st.id}'); setDocPoint(st,'${kind}','${it.id}'); })()">üìé</span>
            ${badgeNext}${link}${doc}
          </div>
        </div>
      `;
      box.appendChild(row);
      // hijos
      if(it.kids?.length){
        const cont=document.createElement('div'); cont.style.marginLeft='36px';
        box.appendChild(cont);
        renderList(it.kids,cont,kind,idxStr);
      }
    });
  }
  renderList(st.yes||[],yBox,'yes','');
  renderList(st.no||[], nBox,'no','');
}

function findStep(subId,stepId){
  const p=current(); const s=p.sub.find(x=>x.id===subId); return s.steps.find(t=>t.id===stepId);
}
function findStepById(stepId){
  const p=current(); for(const s of p.sub){ const t=s.steps.find(x=>x.id===stepId); if(t) return t; } return null;
}
function findPoint(st,kind,pid){
  const arr=(kind==='yes'?st.yes:st.no);
  const deep=(list)=>{ for(const it of list){ if(it.id===pid) return it; const f=deep(it.kids||[]); if(f) return f; } return null; }
  return deep(arr);
}
function findPointById(stepId,kind,pid){
  const st=findStepById(stepId); return findPoint(st,kind,pid);
}

/* ========= botones globales ========= */
let editMode=false; let compact=true;
function toggleEdit(){ editMode=!editMode; document.getElementById('app').classList.toggle('hide-icons', !editMode); }
function toggleCompact(){ compact=!compact; document.getElementById('app').classList.toggle('compact', compact); }

function exportHTML(){
  const html='<!doctype html>'+document.documentElement.outerHTML;
  const blob=new Blob([html],{type:'text/html'}); const a=document.createElement('a');
  a.href=URL.createObjectURL(blob); a.download='procesos-audio.html'; a.click(); URL.revokeObjectURL(a.href);
}

/* ========= listeners ========= */
document.getElementById('btnAddProc').onclick=addProcess;
document.getElementById('btnAddSubStep').onclick=addSubStep;
document.getElementById('btnToggleEdit').onclick=toggleEdit;
document.getElementById('btnCompact').onclick=toggleCompact;
document.getElementById('btnExport').onclick=exportHTML;
document.getElementById('q').oninput=renderLeft;

/* ========= init ========= */
document.getElementById('app').classList.add('hide-icons');   // vista limpia por defecto
document.getElementById('app').classList.add('compact');      // compacto por defecto
renderLeft(); renderRight(); stamp();
</script>
</body>
</html>
